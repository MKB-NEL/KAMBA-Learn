<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secure Login</title>
<style>
  :root {
    --primary: #4361ee;
    --primary-dark: #3a0ca3;
    --secondary: #f72585;
    --dark: #212529;
    --light: #f8f9fa;
    --success: #4cc9f0;
    --error: #ef233c;
    --border-radius: 12px;
    --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    --transition: all 0.3s ease;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: var(--dark);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
  }

  .login-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: var(--border-radius);
    width: 100%;
    max-width: 400px;
    padding: 2.5rem;
    box-shadow: var(--box-shadow);
    position: relative;
    overflow: hidden;
  }

  .login-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
  }

  .logo {
    text-align: center;
    margin-bottom: 2rem;
  }

  .logo h2 {
    color: var(--primary-dark);
    font-weight: 700;
    font-size: 1.8rem;
    margin-bottom: 0.5rem;
  }

  .logo p {
    color: #6c757d;
    font-size: 0.9rem;
  }

  .form-group {
    margin-bottom: 1.5rem;
    position: relative;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: var(--dark);
  }

  .form-control {
    width: 100%;
    padding: 0.8rem 1rem;
    border: 1px solid #dee2e6;
    border-radius: var(--border-radius);
    font-size: 1rem;
    transition: var(--transition);
    background-color: rgba(255, 255, 255, 0.8);
  }

  .form-control:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
  }

  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.8rem 1.5rem;
    border: none;
    border-radius: var(--border-radius);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    width: 100%;
  }

  .btn-primary {
    background-color: var(--primary);
    color: white;
  }

  .btn-primary:hover {
    background-color: var(--primary-dark);
    transform: translateY(-2px);
  }

  .btn-secondary {
    background-color: var(--secondary);
    color: white;
  }

  .btn-secondary:hover {
    background-color: #d91a6b;
    transform: translateY(-2px);
  }

  .loading {
    display: none;
    text-align: center;
    margin: 1rem 0;
    color: var(--primary);
  }

  .error-message {
    color: var(--error);
    font-size: 0.9rem;
    margin-top: 0.5rem;
    text-align: center;
  }

  .youtube-link {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 2rem;
    color: #6c757d;
    text-decoration: none;
    font-size: 0.9rem;
    transition: var(--transition);
  }

  .youtube-link:hover {
    color: var(--secondary);
  }

  .youtube-link svg {
    fill: #ff0000;
    width: 20px;
    height: 20px;
  }

  .add-user-btn {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--secondary);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    box-shadow: 0 4px 10px rgba(247, 37, 133, 0.3);
    transition: var(--transition);
  }

  .add-user-btn:hover {
    background-color: #d91a6b;
    transform: scale(1.1);
  }

  @media (max-width: 480px) {
    .login-card {
      padding: 1.5rem;
    }
  }
</style>
</head>
<body>
<div class="login-card">
  <button class="add-user-btn" id="addUserBtn">+</button>
  
  <div class="logo">
    <h2>Welcome Back</h2>
    <p>Sign in to access your account</p>
  </div>

  <form id="loginForm">
    <div class="form-group">
      <label for="username">Username</label>
      <input type="text" id="username" class="form-control" placeholder="Enter your username" required>
    </div>
    
    <div class="form-group">
      <label for="password">Password</label>
      <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
    </div>
    
    <button type="submit" class="btn btn-primary">Sign In</button>
  </form>

  <div class="loading" id="loading">
    <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/>
      <path d="M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z">
        <animateTransform attributeName="transform" type="rotate" dur="0.75s" values="0 12 12;360 12 12" repeatCount="indefinite"/>
      </path>
    </svg>
    Authenticating...
  </div>

  <div id="errorMsg" class="error-message"></div>

  <a href="https://www.youtube.com/@btemOfficial" target="_blank" class="youtube-link">
    <svg height="20" viewBox="0 0 24 24" width="20">
      <path d="M19.615 3.184c-1.53-.41-7.615-.41-7.615-.41s-6.085 0-7.615.41A3.004 3.004 0 0 0 2.41 5.184C2 6.714 2 10.5 2 10.5s0 3.786.41 5.316a3.004 3.004 0 0 0 2.59 2c1.53.41 7.615.41 7.615.41s6.085 0 7.615-.41a3.004 3.004 0 0 0 2.59-2C22 14.286 22 10.5 22 10.5s0-3.786-.41-5.316a3.004 3.004 0 0 0-2.59-2zM9.75 13.5v-6l5.25 3-5.25 3z"/>
    </svg>
    KAMBA Codex â€” Subscribe for more
  </a>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs, query, where } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBbhxmAkHJtq3Zs17P4ewHsc8wi8-0M_XI",
    authDomain: "developers-imw.firebaseapp.com",
    projectId: "developers-imw",
    storageBucket: "developers-imw.firebasestorage.app",
    messagingSenderId: "182400720989",
    appId: "1:182400720989:web:dfa30c57dcd2c8c2c96db4",
    measurementId: "G-1VFTEWDBPG"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const loginForm = document.getElementById('loginForm');
  const loadingEl = document.getElementById('loading');
  const errorMsg = document.getElementById('errorMsg');

  // Login handling
  loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    loadingEl.style.display = 'block';
    errorMsg.textContent = '';

    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();

    try {
      const q = query(collection(db, "users"), where("username", "==", username), where("password", "==", password));
      const querySnapshot = await getDocs(q);
      loadingEl.style.display = 'none';
      if (!querySnapshot.empty) {
        window.location.href = "well.html";
      } else {
        errorMsg.textContent = "Invalid username or password.";
      }
    } catch (err) {
      loadingEl.style.display = 'none';
      errorMsg.textContent = "Error logging in: " + err.message;
    }
  });

  // Add user button
  document.getElementById('addUserBtn').addEventListener('click', async () => {
    const newUsername = prompt("Enter new username:");
    const newPassword = prompt("Enter new password:");
    if (newUsername && newPassword) {
      try {
        await addDoc(collection(db, "users"), {
          username: newUsername,
          password: newPassword
        });
        alert("User added successfully!");
      } catch (err) {
        alert("Error adding user: " + err.message);
      }
    }
  });
</script>
</body>
</html>
